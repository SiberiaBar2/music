(this.webpackJsonpyinao=this.webpackJsonpyinao||[]).push([[7],{192:function(t,e,s){},200:function(t,e,s){"use strict";s.r(e),s.d(e,"default",(function(){return h}));var a=s(25),n=s(44),r=s(14),i=s(15),c=s(19),u=s(20),o=s(0),l=(s(192),s(18)),h=function(t){Object(c.a)(s,t);var e=Object(u.a)(s);function s(){var t;return Object(r.a)(this,s),(t=e.call(this)).state={status:!0,deg:"15deg",info:{},lyric:[],playUrl:[]},t}return Object(i.a)(s,[{key:"render",value:function(){var t=this;return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"play-container",children:[Object(l.jsx)("div",{className:"play-control",style:{transform:"rotate(".concat(this.state.deg,")")}}),Object(l.jsxs)("div",{className:"play-box",children:[Object(l.jsx)("img",{className:this.state.status?"":"rotate",src:this.state.info.picUrl}),Object(l.jsx)("div",{onClick:function(){return t.toggle()},className:["btn",this.state.status?"play-btn":"pause-btn"].join(" ")})]}),Object(l.jsx)("audio",{src:this.state.playUrl,controls:!0,ref:function(e){return t.music=e},style:{display:"none"}}),Object(l.jsxs)("div",{className:"content",children:[Object(l.jsx)("h3",{children:this.state.info.name}),Object(l.jsx)("div",{children:this.state.lyric.map((function(t,e){return Object(l.jsx)("p",{children:t},e)}))})]})]})})}},{key:"componentDidMount",value:function(){this.getDetail(),this.getPlayUrl(),this.getLyric()}},{key:"toggle",value:function(){var t=this.state.status?0:"15deg";this.setState({status:!this.state.status,deg:t}),this.state.status?this.music.play():this.music.pause()}},{key:"getDetail",value:function(){var t=Object(n.a)(Object(a.a)().mark((function t(){var e,s;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.match.params.id,t.next=3,this.$http.get("/song/detail",{params:{ids:e}});case 3:200===(s=t.sent).code&&this.setState({info:s.songs[0].al});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getPlayUrl",value:function(){var t=Object(n.a)(Object(a.a)().mark((function t(){var e,s,n;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.match.params.id,t.next=3,this.$http.get("/song/url",{params:{id:e}});case 3:200===(s=t.sent).code&&(n=s.data[0].url,this.setState({playUrl:n}));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getLyric",value:function(){var t=Object(n.a)(Object(a.a)().mark((function t(){var e,s,n;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.match.params.id,t.next=3,this.$http.get("/lyric",{params:{id:e}});case 3:s=t.sent,n=this.lyricFmt(s.lrc.lyric),this.setState({lyric:n});case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"lyricFmt",value:function(t){var e=[];return t.replace(/\[(.*)\](.*)/g,(function(t,s,a){e.push(a)})),e}}]),s}(o.Component)}}]);
//# sourceMappingURL=7.0afbcf75.chunk.js.map